<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8">
<title>my_actuator: serial_comm.cpp Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3eaae5858ab18d759b6dc07a36942e78.html">RmdApiSerial</a></li><li class="navelem"><a class="el" href="dir_ced54d9526e1b98dbfa173167ae3b2ec.html">rmd</a></li><li class="navelem"><a class="el" href="dir_1f7332a682506dd79d1c43461bb67459.html">src</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">serial_comm.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="serial__comm_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160; </div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="serial__comm_8h.html">rmd/serial_comm.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160; </div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#a3537e3a31982286532e82883da4fc280">   22</a></span>&#160;<a class="code" href="classSerialCommunication.html#a3537e3a31982286532e82883da4fc280">SerialCommunication::SerialCommunication</a>()</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;{</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    <a class="code" href="classSerialCommunication.html#af32ce489247c69c7c4ab5e27189acca5">port_</a> = <span class="stringliteral">&quot;/dev/ttyUSB0&quot;</span>;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;    <a class="code" href="classSerialCommunication.html#af89043e68e4d1b178ab26dd55ebd480b">baudrate_</a> = 115200;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <a class="code" href="classSerialCommunication.html#a0d075693c54c65c2b1b4ae29773125a1">timeout_</a> = 100;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;}</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#a2a3853cbf84d66677274c47e3933ae47">   29</a></span>&#160;<a class="code" href="classSerialCommunication.html#a3537e3a31982286532e82883da4fc280">SerialCommunication::SerialCommunication</a>(std::string &amp;port, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> baudrate, <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> timeout)</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;{</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;    <a class="code" href="classSerialCommunication.html#af32ce489247c69c7c4ab5e27189acca5">port_</a> = port;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <a class="code" href="classSerialCommunication.html#af89043e68e4d1b178ab26dd55ebd480b">baudrate_</a> = baudrate;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <a class="code" href="classSerialCommunication.html#a0d075693c54c65c2b1b4ae29773125a1">timeout_</a> = timeout;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;}</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#a60717eff5f66d85af40812811ca6321d">   36</a></span>&#160;<a class="code" href="classSerialCommunication.html#a60717eff5f66d85af40812811ca6321d">SerialCommunication::~SerialCommunication</a>()</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;{</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <a class="code" href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">serialPort_</a>.Close();</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;}</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160; </div>
<div class="line"><a name="l00041"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#ac0c3504b5affeb58ccaf50fe10b7cd9d">   41</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classSerialCommunication.html#ac0c3504b5affeb58ccaf50fe10b7cd9d">SerialCommunication::get_serial_port_address</a>(std::string &amp;port)</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;{</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="classSerialCommunication.html#af32ce489247c69c7c4ab5e27189acca5">port_</a> = port;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <a class="code" href="classSerialCommunication.html#a0d075693c54c65c2b1b4ae29773125a1">timeout_</a> = 100;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;}</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160; </div>
<div class="line"><a name="l00047"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#a2b4aa9a5eca70ed5e5a75880c888dad3">   47</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classSerialCommunication.html#a2b4aa9a5eca70ed5e5a75880c888dad3">SerialCommunication::serial_init</a>()</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;{</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <a class="code" href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">serialPort_</a> = SerialPort(<a class="code" href="classSerialCommunication.html#af32ce489247c69c7c4ab5e27189acca5">port_</a>, BaudRate::B_115200, NumDataBits::EIGHT, Parity::NONE, NumStopBits::ONE);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">serialPort_</a>.SetTimeout(<a class="code" href="classSerialCommunication.html#a0d075693c54c65c2b1b4ae29773125a1">timeout_</a>); <span class="comment">// Block for up to 100ms to receive data</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <a class="code" href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">serialPort_</a>.Open();</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;}</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160; </div>
<div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#a85b67d736fbd4fc5bb3c1e04fa97b922">   54</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classSerialCommunication.html#a85b67d736fbd4fc5bb3c1e04fa97b922">SerialCommunication::serial_shutdown</a>()</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;{</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">serialPort_</a>.Close();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;}</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160; </div>
<div class="line"><a name="l00059"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#aa8632a734c3bbf5f85b35414176dc61b">   59</a></span>&#160;std::string <a class="code" href="classSerialCommunication.html#aa8632a734c3bbf5f85b35414176dc61b">SerialCommunication::send_serial_data</a>(<span class="keyword">const</span> std::string &amp;data)</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;{</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <a class="code" href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">serialPort_</a>.Write(data);</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classSerialCommunication.html#ac7983288ddfb4d1204ca51b5e2139c96">receive_serial_data</a>();</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;}</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160; </div>
<div class="line"><a name="l00065"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#ac7983288ddfb4d1204ca51b5e2139c96">   65</a></span>&#160;std::string <a class="code" href="classSerialCommunication.html#ac7983288ddfb4d1204ca51b5e2139c96">SerialCommunication::receive_serial_data</a>()</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;{</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <a class="code" href="classSerialCommunication.html#a8e4e2fd526a759056b731eec730d372f">receive_data_</a> = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <a class="code" href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">serialPort_</a>.Read(<a class="code" href="classSerialCommunication.html#a8e4e2fd526a759056b731eec730d372f">receive_data_</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classSerialCommunication.html#a8e4e2fd526a759056b731eec730d372f">receive_data_</a>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;}</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160; </div>
<div class="line"><a name="l00073"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#a57eb6f720472aab6dd8ea2b259ace06e">   73</a></span>&#160;std::string <a class="code" href="classSerialCommunication.html#a57eb6f720472aab6dd8ea2b259ace06e">SerialCommunication::send_serial_data_2</a>(std::vector&lt;uint8_t&gt; &amp;data_vec)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;{</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160; </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">serialPort_</a>.WriteBinary(data_vec);</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classSerialCommunication.html#ac7983288ddfb4d1204ca51b5e2139c96">receive_serial_data</a>();</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;}</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160; </div>
<div class="line"><a name="l00080"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#a1c6faac75af83c94b464dae33826f97a">   80</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classSerialCommunication.html#a1c6faac75af83c94b464dae33826f97a">SerialCommunication::send_serial_b</a>(std::vector&lt;uint8_t&gt; &amp;send)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;{</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <a class="code" href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">serialPort_</a>.WriteBinary(send);</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;}</div>
<div class="line"><a name="l00084"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#a4c04bd704ac35d5f22488f8009eed7ac">   84</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classSerialCommunication.html#a4c04bd704ac35d5f22488f8009eed7ac">SerialCommunication::receive_serial_b</a>(std::vector&lt;uint8_t&gt; &amp;receive)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;{</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <a class="code" href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">serialPort_</a>.ReadBinary(receive);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;}</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160; </div>
<div class="line"><a name="l00089"></a><span class="lineno"><a class="line" href="classSerialCommunication.html#afbdd6a6004395aace8586e5de5f12abc">   89</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classSerialCommunication.html#afbdd6a6004395aace8586e5de5f12abc">SerialCommunication::send_receive_serial_b</a>(std::vector&lt;uint8_t&gt; &amp;send, std::vector&lt;uint8_t&gt; &amp;receive)</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;{</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <a class="code" href="classSerialCommunication.html#a1c6faac75af83c94b464dae33826f97a">send_serial_b</a>(send);</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <a class="code" href="classSerialCommunication.html#a4c04bd704ac35d5f22488f8009eed7ac">receive_serial_b</a>(receive);</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
<div class="ttc" id="aclassSerialCommunication_html_a8e4e2fd526a759056b731eec730d372f"><div class="ttname"><a href="classSerialCommunication.html#a8e4e2fd526a759056b731eec730d372f">SerialCommunication::receive_data_</a></div><div class="ttdeci">std::string receive_data_</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8h_source.html#l00057">serial_comm.h:57</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_ac7983288ddfb4d1204ca51b5e2139c96"><div class="ttname"><a href="classSerialCommunication.html#ac7983288ddfb4d1204ca51b5e2139c96">SerialCommunication::receive_serial_data</a></div><div class="ttdeci">std::string receive_serial_data()</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00065">serial_comm.cpp:65</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_afe1c13ad34f407d599eb457265e15670"><div class="ttname"><a href="classSerialCommunication.html#afe1c13ad34f407d599eb457265e15670">SerialCommunication::serialPort_</a></div><div class="ttdeci">SerialPort serialPort_</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8h_source.html#l00056">serial_comm.h:56</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_aa8632a734c3bbf5f85b35414176dc61b"><div class="ttname"><a href="classSerialCommunication.html#aa8632a734c3bbf5f85b35414176dc61b">SerialCommunication::send_serial_data</a></div><div class="ttdeci">std::string send_serial_data(const std::string &amp;data)</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00059">serial_comm.cpp:59</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_a1c6faac75af83c94b464dae33826f97a"><div class="ttname"><a href="classSerialCommunication.html#a1c6faac75af83c94b464dae33826f97a">SerialCommunication::send_serial_b</a></div><div class="ttdeci">void send_serial_b(std::vector&lt; uint8_t &gt; &amp;send)</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00080">serial_comm.cpp:80</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_afbdd6a6004395aace8586e5de5f12abc"><div class="ttname"><a href="classSerialCommunication.html#afbdd6a6004395aace8586e5de5f12abc">SerialCommunication::send_receive_serial_b</a></div><div class="ttdeci">void send_receive_serial_b(std::vector&lt; uint8_t &gt; &amp;send, std::vector&lt; uint8_t &gt; &amp;receive)</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00089">serial_comm.cpp:89</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_a2b4aa9a5eca70ed5e5a75880c888dad3"><div class="ttname"><a href="classSerialCommunication.html#a2b4aa9a5eca70ed5e5a75880c888dad3">SerialCommunication::serial_init</a></div><div class="ttdeci">void serial_init()</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00047">serial_comm.cpp:47</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_a4c04bd704ac35d5f22488f8009eed7ac"><div class="ttname"><a href="classSerialCommunication.html#a4c04bd704ac35d5f22488f8009eed7ac">SerialCommunication::receive_serial_b</a></div><div class="ttdeci">void receive_serial_b(std::vector&lt; uint8_t &gt; &amp;receive)</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00084">serial_comm.cpp:84</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_a0d075693c54c65c2b1b4ae29773125a1"><div class="ttname"><a href="classSerialCommunication.html#a0d075693c54c65c2b1b4ae29773125a1">SerialCommunication::timeout_</a></div><div class="ttdeci">unsigned int timeout_</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8h_source.html#l00055">serial_comm.h:55</a></div></div>
<div class="ttc" id="aserial__comm_8h_html"><div class="ttname"><a href="serial__comm_8h.html">serial_comm.h</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_a57eb6f720472aab6dd8ea2b259ace06e"><div class="ttname"><a href="classSerialCommunication.html#a57eb6f720472aab6dd8ea2b259ace06e">SerialCommunication::send_serial_data_2</a></div><div class="ttdeci">std::string send_serial_data_2(std::vector&lt; uint8_t &gt; &amp;data_vec)</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00073">serial_comm.cpp:73</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_ac0c3504b5affeb58ccaf50fe10b7cd9d"><div class="ttname"><a href="classSerialCommunication.html#ac0c3504b5affeb58ccaf50fe10b7cd9d">SerialCommunication::get_serial_port_address</a></div><div class="ttdeci">void get_serial_port_address(std::string &amp;port)</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00041">serial_comm.cpp:41</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_a60717eff5f66d85af40812811ca6321d"><div class="ttname"><a href="classSerialCommunication.html#a60717eff5f66d85af40812811ca6321d">SerialCommunication::~SerialCommunication</a></div><div class="ttdeci">~SerialCommunication()</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00036">serial_comm.cpp:36</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_af89043e68e4d1b178ab26dd55ebd480b"><div class="ttname"><a href="classSerialCommunication.html#af89043e68e4d1b178ab26dd55ebd480b">SerialCommunication::baudrate_</a></div><div class="ttdeci">unsigned int baudrate_</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8h_source.html#l00054">serial_comm.h:54</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_a3537e3a31982286532e82883da4fc280"><div class="ttname"><a href="classSerialCommunication.html#a3537e3a31982286532e82883da4fc280">SerialCommunication::SerialCommunication</a></div><div class="ttdeci">SerialCommunication()</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00022">serial_comm.cpp:22</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_a85b67d736fbd4fc5bb3c1e04fa97b922"><div class="ttname"><a href="classSerialCommunication.html#a85b67d736fbd4fc5bb3c1e04fa97b922">SerialCommunication::serial_shutdown</a></div><div class="ttdeci">void serial_shutdown()</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8cpp_source.html#l00054">serial_comm.cpp:54</a></div></div>
<div class="ttc" id="aclassSerialCommunication_html_af32ce489247c69c7c4ab5e27189acca5"><div class="ttname"><a href="classSerialCommunication.html#af32ce489247c69c7c4ab5e27189acca5">SerialCommunication::port_</a></div><div class="ttdeci">std::string port_</div><div class="ttdef"><b>Definition:</b> <a href="serial__comm_8h_source.html#l00053">serial_comm.h:53</a></div></div>

<br clear="all" />
<hr size="1"><div style="align: right;">
<a href="http://wiki.ros.org/my_actuator">my_actuator</a><br />
Author(s): </br />
<small>autogenerated on Tue Mar 28 2023 10:55:53</small>
</div>
</body>
</html>
